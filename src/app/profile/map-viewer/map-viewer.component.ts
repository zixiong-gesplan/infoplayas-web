import {Component, Input, OnInit} from '@angular/core';
import {loadModules} from 'esri-loader';
import {EsriRequestService} from '../../services/esri-request.service';
import {environment} from '../../../environments/environment.prod';
import {Auth} from '../../models/auth';
import {AuthGuardService} from '../../services/auth-guard.service';
import {GradesProtectionService} from '../../services/grades-protection.service';

declare var $: any;
declare var jquery: any;

// variables javascript esri maps
declare let view: any;
declare const createScaleBar: any;
declare const createBaseMapToggle: any;
declare const createLegend: any;
declare const createExpand: any;
declare const playasLayerId: any;
declare const municipiosLayerId: any;
declare let filterPlayas: any;
declare let filterMunicipios: any;
declare const aytos: any;
declare const createHomeButton: any;
declare let listNode: any;
declare const loadList: any;
declare let features: any;

@Component({
    selector: 'app-map-viewer',
    templateUrl: './map-viewer.component.html',
    styleUrls: ['./map-viewer.component.css']
})
export class MapViewerComponent implements OnInit {
    @Input() zoom: number;
    @Input() mapHeight: string;
    private currentUser: Auth;

    constructor(private authService: AuthGuardService, private service: EsriRequestService, private gradeService: GradesProtectionService) {
    }

    ngOnInit() {
        this.currentUser = this.authService.getCurrentUser();
        this.setMap();
    }


    private setMap() {
        const options = {css: true, version: '4.11'};

        // first, we use Dojo's loader to require the map class
        loadModules([
            'esri/WebMap',
            'esri/views/MapView',
            'esri/identity/IdentityManager',
            'esri/widgets/ScaleBar',
            'esri/widgets/BasemapToggle',
            'esri/widgets/Expand',
            'esri/widgets/Legend',
            'esri/widgets/Home',
            'esri/Graphic'
        ], options)
            .then(([
                       WebMap,
                       MapView,
                       IdentityManager,
                       ScaleBar,
                       BasemapToggle,
                       Expand,
                       Legend,
                       Home,
                       Graphic
                   ]) => {

                IdentityManager.registerToken({
                    expires: this.currentUser.expires,
                    server: environment.urlserver,
                    ssl: false,
                    token: this.currentUser.token,
                    userId: this.currentUser.username
                });
                // then we load a web map from an id
                const webmap = new WebMap({
                    portalItem: {
                        // TODO cambiar al nuevo webmap
                        id: environment.idportal
                    }
                });
                // and we show that map in a container w/ id #viewDiv
                view = new MapView({
                    container: 'viewDiv', // Reference to the scene div created in step 5
                    map: webmap, // Reference to the map object created before the scene
                    zoom: this.zoom
                });

                // Create a point graphic

                // Add graphics to GraphicsLayer directly as an array
                // layer.graphics = [graphicA, graphicB];


                // First create a point geometry (this is the location of the Titanic)
                const point = {
                    type: 'point', // autocasts as new Point()
                    x: 462430.1819498175,
                    y: 3093228.306533833 - 12,
                    spatialReference: {
                        latestWkid: 32628,
                        wkid: 32628
                    }
                };

                // Create a symbol for drawing the point
                const symbolHigh = {
                    type: 'picture-marker',  // autocasts as new PictureMarkerSymbol()
                    url: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNTEyLjAwMTQwMzgwODU5MzgiIHZlcnNpb249IjEuMSIgd2lkdGg9IjUxMiIgc3R5bGU9IiI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KCjxnIGNsYXNzPSJjdXJyZW50TGF5ZXIiIHN0eWxlPSIiPjx0aXRsZT5MYXllciAxPC90aXRsZT48cmVjdCBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS1kYXNob2Zmc2V0PSIiIGZpbGwtcnVsZT0ibm9uemVybyIgaWQ9InN2Z18zIiB4PSI3Ni45MTM1MzQ2NDEyNjU4NyIgeT0iMTIyLjc2ODc4MDA1MjY2MTkiIHdpZHRoPSIyNzcuMTk1OTkyMjk3MzUxMDQiIGhlaWdodD0iMjY3LjU0MzM3ODY3MTU5ODUiIHN0eWxlPSJjb2xvcjogcmdiKDAsIDAsIDApOyIgY2xhc3M9IiIgZmlsbC1vcGFjaXR5PSIxIi8+PGcgaWQ9InN1cmZhY2UxIiBjbGFzcz0ic2VsZWN0ZWQiIGZpbGw9IiNlYjFhMWEiIGZpbGwtb3BhY2l0eT0iMSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utb3BhY2l0eT0iMSI+CjxwYXRoIGQ9Ik0yMTcuNDE4MDU5MzAxMDM2ODMsMTU5LjAzNTA2NTY5ODk2MzE3IEMxNjMuNjI1MDkwMzAxMDM2ODMsMTU5LjAzNTA2NTY5ODk2MzE3IDExOS44NjMzNzEzMDEwMzY4NCwyMDIuNzk2Nzg0Njk4OTYzMTcgMTE5Ljg2MzM3MTMwMTAzNjg0LDI1Ni41ODU4NDY2OTg5NjMxNyBDMTE5Ljg2MzM3MTMwMTAzNjg0LDMxMC4zNzg4MTU2OTg5NjMxNCAxNjMuNjI1MDkwMzAxMDM2ODMsMzU0LjE0MDUzNDY5ODk2MzE3IDIxNy40MTgwNTkzMDEwMzY4MywzNTQuMTQwNTM0Njk4OTYzMTcgQzI3MS4yMDcxMjEzMDEwMzY4LDM1NC4xNDA1MzQ2OTg5NjMxNyAzMTQuOTY4ODQwMzAxMDM2ODMsMzEwLjM3ODgxNTY5ODk2MzE0IDMxNC45Njg4NDAzMDEwMzY4MywyNTYuNTg1ODQ2Njk4OTYzMTcgQzMxNC45Njg4NDAzMDEwMzY4MywyMDIuNzk2Nzg0Njk4OTYzMTcgMjcxLjIwNzEyMTMwMTAzNjgsMTU5LjAzNTA2NTY5ODk2MzE3IDIxNy40MTgwNTkzMDEwMzY4MywxNTkuMDM1MDY1Njk4OTYzMTcgek0yNzUuMzM2MDI3MzAxMDM2ODQsMjM4LjIxNDc1MzY5ODk2MzE2IEwyMDUuNDQ5MzA5MzAxMDM2ODMsMzA4LjEwMTQ3MjY5ODk2MzE2IEMyMDIuNTE1NzE1MzAxMDM2ODMsMzExLjAzNTA2NTY5ODk2MzE0IDE5OC42NjgwNTkzMDEwMzY4MywzMTIuNTAzODE1Njk4OTYzMTQgMTk0LjgyNDMwOTMwMTAzNjgzLDMxMi41MDM4MTU2OTg5NjMxNCBDMTkwLjk4MDU1OTMwMTAzNjgzLDMxMi41MDM4MTU2OTg5NjMxNCAxODcuMTM2ODA5MzAxMDM2ODMsMzExLjAzODk3MjY5ODk2MzE2IDE4NC4yMDMyMTUzMDEwMzY4MywzMDguMTAxNDcyNjk4OTYzMTYgTDE1Ny40OTYxODQzMDEwMzY4MywyODEuMzk0NDQwNjk4OTYzMTQgQzE1MS42Mjg5OTYzMDEwMzY4NCwyNzUuNTMxMTU5Njk4OTYzMTcgMTUxLjYyODk5NjMwMTAzNjg0LDI2Ni4wMTk0NDA2OTg5NjMxNCAxNTcuNDk2MTg0MzAxMDM2ODMsMjYwLjE1MjI1MzY5ODk2MzIgQzE2My4zNTk0NjUzMDEwMzY4MywyNTQuMjg1MDY1Njk4OTYzMTcgMTcyLjg3MTE4NDMwMTAzNjgzLDI1NC4yODUwNjU2OTg5NjMxNyAxNzguNzM4MzcxMzAxMDM2ODQsMjYwLjE1MjI1MzY5ODk2MzIgTDE5NC44MjQzMDkzMDEwMzY4MywyNzYuMjM4MTkwNjk4OTYzMTQgTDI1NC4wOTM4NDAzMDEwMzY4MywyMTYuOTcyNTY1Njk4OTYzMTcgQzI1OS45NTcxMjEzMDEwMzY4LDIxMS4xMDUzNzg2OTg5NjMxNiAyNjkuNDY4ODQwMzAxMDM2ODMsMjExLjEwNTM3ODY5ODk2MzE2IDI3NS4zMzYwMjczMDEwMzY4NCwyMTYuOTcyNTY1Njk4OTYzMTcgQzI4MS4yMDMyMTUzMDEwMzY4MywyMjIuODM1ODQ2Njk4OTYzMTcgMjgxLjIwMzIxNTMwMTAzNjgzLDIzMi4zNDc1NjU2OTg5NjMxNyAyNzUuMzM2MDI3MzAxMDM2ODQsMjM4LjIxNDc1MzY5ODk2MzE2IHpNMjc1LjMzNjAyNzMwMTAzNjg0LDIzOC4yMTQ3NTM2OTg5NjMxNiAiIHN0eWxlPSJmaWxsLXJ1bGU6IG5vbnplcm87IiBpZD0ic3ZnXzEiIGZpbGw9IiNlYjFhMWEiIGZpbGwtb3BhY2l0eT0iMSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utb3BhY2l0eT0iMSIvPgo8cGF0aCBkPSJNNDM0LjkxMDI0NjMwMTAzNjgsMTM5LjQ5NjAwMzY5ODk2MzE2IEw0MzQuODk0NjIxMzAxMDM2OCwxMzkuMDk3NTY1Njk4OTYzMTcgQzQzNC42NzE5NjUzMDEwMzY4MywxMzQuMTc5NTk2Njk4OTYzMTcgNDM0LjUyMzUyNzMwMTAzNjg0LDEyOC45NzY0NzI2OTg5NjMxNiA0MzQuNDMzNjg0MzAxMDM2ODYsMTIzLjE4NzQwOTY5ODk2MzE3IEM0MzQuMDE1NzE1MzAxMDM2ODMsOTQuOTU2OTQwNjk4OTYzMTcgNDExLjU3NDMwOTMwMTAzNjg2LDcxLjYwNTM3ODY5ODk2MzE2IDM4My4zMzk5MzQzMDEwMzY4Niw3MC4wMjcyNTM2OTg5NjMxNiBDMzI0LjQ3Mjc0NjMwMTAzNjgsNjYuNzQyMDk2Njk4OTYzMTcgMjc4LjkzMzY4NDMwMTAzNjg2LDQ3LjU0Njc4NDY5ODk2MzE2NSAyNDAuMDIzNTI3MzAxMDM2ODQsOS42MjEwMDM2OTg5NjMxNjUgTDIzOS42OTE0OTYzMDEwMzY4NCw5LjMwNDU5NjY5ODk2MzE2NSBDMjI3LjAwMDA5MDMwMTAzNjgzLC0yLjMzMjEyMTMwMTAzNjgzNDUgMjA3Ljg1NTU1OTMwMTAzNjgzLC0yLjMzMjEyMTMwMTAzNjgzNDUgMTk1LjE2MDI0NjMwMTAzNjg0LDkuMzA0NTk2Njk4OTYzMTY1IEwxOTQuODI4MjE1MzAxMDM2ODMsOS42MjEwMDM2OTg5NjMxNjUgQzE1NS45MTgwNTkzMDEwMzY4Myw0Ny41NDY3ODQ2OTg5NjMxNjUgMTEwLjM3ODk5NjMwMTAzNjg0LDY2Ljc0MjA5NjY5ODk2MzE3IDUxLjUxMTgwOTMwMTAzNjgzNCw3MC4wMzExNTk2OTg5NjMxNyBDMjMuMjgxMzQwMzAxMDM2ODM1LDcxLjYwNTM3ODY5ODk2MzE2IDAuODM2MDI3MzAxMDM2ODM0Niw5NC45NTY5NDA2OTg5NjMxNyAwLjQxODA1OTMwMTAzNjgzNDc1LDEyMy4xOTEzMTU2OTg5NjMxNyBDMC4zMzIxMjEzMDEwMzY4MzQ3LDEyOC45NDEzMTU2OTg5NjMxNyAwLjE3OTc3NzMwMTAzNjgzNDc2LDEzNC4xNDQ0NDA2OTg5NjMxNyAtMC4wNDI4Nzg2OTg5NjMxNjUzMiwxMzkuMDk3NTY1Njk4OTYzMTcgTC0wLjA2NjMxNTY5ODk2MzE2NTI1LDE0MC4wMjMzNDY2OTg5NjMxNyBDLTEuMjEwODQ2Njk4OTYzMTY1MiwyMDAuMDUwNjkwNjk4OTYzMTcgLTIuNjMyNzIyNjk4OTYzMTY1NCwyNzQuNzU3NzIyNjk4OTYzMTYgMjIuMzU5NDY1MzAxMDM2ODM1LDM0Mi41NjYzMTU2OTg5NjMxNCBDMzYuMTAxNjUzMzAxMDM2ODMsMzc5Ljg1NTM3ODY5ODk2MzIgNTYuOTE0MTUzMzAxMDM2ODMsNDEyLjI2OTQ0MDY5ODk2MzE0IDg0LjIxNDkzNDMwMTAzNjgzLDQzOC45MTM5NzI2OTg5NjMxNiBDMTE1LjMwODY4NDMwMTAzNjgzLDQ2OS4yNTc3MjI2OTg5NjMxNiAxNTYuMDM1MjQ2MzAxMDM2ODQsNDkzLjM0NzU2NTY5ODk2MzE0IDIwNS4yNjE4MDkzMDEwMzY4Myw1MTAuNTExNjI4Njk4OTYzMiBDMjA2Ljg2MzM3MTMwMTAzNjg0LDUxMS4wNzAyMjI2OTg5NjMxNiAyMDguNTI3NDM0MzAxMDM2ODMsNTExLjUyMzM0NjY5ODk2MzE3IDIxMC4yMjI3NDYzMDEwMzY4NCw1MTEuODYzMTkwNjk4OTYzMTQgQzIxMi42MTMzNzEzMDEwMzY4NCw1MTIuMzM5NzUzNjk4OTYzMiAyMTUuMDE5NjIxMzAxMDM2ODQsNTEyLjU3ODAzNDY5ODk2MzIgMjE3LjQyNTg3MTMwMTAzNjg0LDUxMi41NzgwMzQ2OTg5NjMyIEMyMTkuODMyMTIxMzAxMDM2ODQsNTEyLjU3ODAzNDY5ODk2MzIgMjIyLjI0MjI3NzMwMTAzNjg0LDUxMi4zMzk3NTM2OTg5NjMyIDIyNC42Mjg5OTYzMDEwMzY4NCw1MTEuODYzMTkwNjk4OTYzMTQgQzIyNi4zMjQzMDkzMDEwMzY4Myw1MTEuNTIzMzQ2Njk4OTYzMTcgMjI4LjAwMDA5MDMwMTAzNjgzLDUxMS4wNjYzMTU2OTg5NjMxNCAyMjkuNjA5NDY1MzAxMDM2ODMsNTEwLjUwMzgxNTY5ODk2MzE0IEMyNzguNzc3NDM0MzAxMDM2ODYsNDkzLjMwODUwMzY5ODk2MzIgMzE5LjQ2MTAyNzMwMTAzNjg0LDQ2OS4yMDY5NDA2OTg5NjMxNCAzNTAuNTI3NDM0MzAxMDM2ODYsNDM4Ljg2NzA5NjY5ODk2MzE3IEMzNzcuODE2NDk2MzAxMDM2OCw0MTIuMjE0NzUzNjk4OTYzMiAzOTguNjI4OTk2MzAxMDM2OCwzNzkuNzkyODc4Njk4OTYzMiA0MTIuMzgyOTAzMzAxMDM2ODMsMzQyLjQ5NjAwMzY5ODk2MzIgQzQzNy40Njg4NDAzMDEwMzY4MywyNzQuNDg0Mjg0Njk4OTYzMTcgNDM2LjA1MDg3MTMwMTAzNjgsMTk5LjYzNjYyODY5ODk2MzE2IDQzNC45MTAyNDYzMDEwMzY4LDEzOS40OTYwMDM2OTg5NjMxNiB6TTIxNy40MTgwNTkzMDEwMzY4MywzODQuMTgzNTAzNjk4OTYzMiBDMTQ3LjA1ODY4NDMwMTAzNjgzLDM4NC4xODM1MDM2OTg5NjMyIDg5LjgyMDQwMzMwMTAzNjgzLDMyNi45NDUyMjI2OTg5NjMxNiA4OS44MjA0MDMzMDEwMzY4MywyNTYuNTg1ODQ2Njk4OTYzMTcgQzg5LjgyMDQwMzMwMTAzNjgzLDE4Ni4yMjY0NzI2OTg5NjMxNiAxNDcuMDU4Njg0MzAxMDM2ODMsMTI4Ljk4ODE5MDY5ODk2MzE3IDIxNy40MTgwNTkzMDEwMzY4MywxMjguOTg4MTkwNjk4OTYzMTcgQzI4Ny43NzM1MjczMDEwMzY4NCwxMjguOTg4MTkwNjk4OTYzMTcgMzQ1LjAxNTcxNTMwMTAzNjgzLDE4Ni4yMjY0NzI2OTg5NjMxNiAzNDUuMDE1NzE1MzAxMDM2ODMsMjU2LjU4NTg0NjY5ODk2MzE3IEMzNDUuMDE1NzE1MzAxMDM2ODMsMzI2Ljk0NTIyMjY5ODk2MzE2IDI4Ny43NzM1MjczMDEwMzY4NCwzODQuMTgzNTAzNjk4OTYzMiAyMTcuNDE4MDU5MzAxMDM2ODMsMzg0LjE4MzUwMzY5ODk2MzIgek0yMTcuNDE4MDU5MzAxMDM2ODMsMzg0LjE4MzUwMzY5ODk2MzIgIiBzdHlsZT0iZmlsbC1ydWxlOiBub256ZXJvOyIgaWQ9InN2Z18yIiBmaWxsPSIjZWIxYTFhIiBmaWxsLW9wYWNpdHk9IjEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW9wYWNpdHk9IjEiLz4KPC9nPjwvZz48L3N2Zz4=',
                    width: '32px',
                    height: '32px'
                };
                const symbolLow = {
                    type: 'picture-marker',  // autocasts as new PictureMarkerSymbol()
                    url: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNTEyLjAwMTQwMzgwODU5MzgiIHZlcnNpb249IjEuMSIgd2lkdGg9IjUxMiIgc3R5bGU9IiI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KCjxnIGNsYXNzPSJjdXJyZW50TGF5ZXIiIHN0eWxlPSIiPjx0aXRsZT5MYXllciAxPC90aXRsZT48ZyBjbGFzcz0ic2VsZWN0ZWQiPjxyZWN0IGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IiIgZmlsbC1ydWxlPSJub256ZXJvIiBpZD0ic3ZnXzMiIHg9Ijc2LjkxMzUzNjA3MTc3NzM0IiB5PSIxMjIuNzY4NzgzNTY5MzM1OTQiIHdpZHRoPSIyNzcuMTk1OTgzODg2NzE4NzUiIGhlaWdodD0iMjY3LjU0MzM2NTQ3ODUxNTYiIHN0eWxlPSJjb2xvcjogcmdiKDAsIDAsIDApOyIgY2xhc3M9IiIgZmlsbC1vcGFjaXR5PSIxIi8+PHJlY3QgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjZmZmZmZmIiBzdHJva2UtZGFzaG9mZnNldD0iIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHg9Ijc2LjkxMzUzNjA3MTc3NzM0IiB5PSIxMjIuNzY4NzgzNTY5MzM1OTQiIHdpZHRoPSIyNzcuMTk1OTgzODg2NzE4NzUiIGhlaWdodD0iMjY3LjU0MzM2NTQ3ODUxNTYiIHN0eWxlPSJjb2xvcjogcmdiKDAsIDAsIDApOyIgY2xhc3M9IiIgZmlsbC1vcGFjaXR5PSIxIiBpZD0ic3ZnXzQiLz48ZyBpZD0ic3VyZmFjZTEiIGNsYXNzPSIiIGZpbGw9IiMwNGI4MDQiIGZpbGwtb3BhY2l0eT0iMSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utb3BhY2l0eT0iMSI+CjxwYXRoIGQ9Ik0yMTYuODQwMDI0NjAyMDczNjcsMTU4LjQ1NzAzMSBDMTYzLjA0NzA1NTYwMjA3MzY3LDE1OC40NTcwMzEgMTE5LjI4NTMzNjYwMjA3MzY3LDIwMi4yMTg3NSAxMTkuMjg1MzM2NjAyMDczNjcsMjU2LjAwNzgxMiBDMTE5LjI4NTMzNjYwMjA3MzY3LDMwOS44MDA3ODEgMTYzLjA0NzA1NTYwMjA3MzY3LDM1My41NjI1IDIxNi44NDAwMjQ2MDIwNzM2NywzNTMuNTYyNSBDMjcwLjYyOTA4NjYwMjA3MzY0LDM1My41NjI1IDMxNC4zOTA4MDU2MDIwNzM2NywzMDkuODAwNzgxIDMxNC4zOTA4MDU2MDIwNzM2NywyNTYuMDA3ODEyIEMzMTQuMzkwODA1NjAyMDczNjcsMjAyLjIxODc1IDI3MC42MjkwODY2MDIwNzM2NCwxNTguNDU3MDMxIDIxNi44NDAwMjQ2MDIwNzM2NywxNTguNDU3MDMxIHpNMjc0Ljc1Nzk5MjYwMjA3MzY3LDIzNy42MzY3MTkgTDIwNC44NzEyNzQ2MDIwNzM2NywzMDcuNTIzNDM4IEMyMDEuOTM3NjgwNjAyMDczNjcsMzEwLjQ1NzAzMSAxOTguMDkwMDI0NjAyMDczNjcsMzExLjkyNTc4MSAxOTQuMjQ2Mjc0NjAyMDczNjcsMzExLjkyNTc4MSBDMTkwLjQwMjUyNDYwMjA3MzY3LDMxMS45MjU3ODEgMTg2LjU1ODc3NDYwMjA3MzY3LDMxMC40NjA5MzggMTgzLjYyNTE4MDYwMjA3MzY3LDMwNy41MjM0MzggTDE1Ni45MTgxNDk2MDIwNzM2NywyODAuODE2NDA2IEMxNTEuMDUwOTYxNjAyMDczNjcsMjc0Ljk1MzEyNSAxNTEuMDUwOTYxNjAyMDczNjcsMjY1LjQ0MTQwNiAxNTYuOTE4MTQ5NjAyMDczNjcsMjU5LjU3NDIxOSBDMTYyLjc4MTQzMDYwMjA3MzY3LDI1My43MDcwMzEgMTcyLjI5MzE0OTYwMjA3MzY3LDI1My43MDcwMzEgMTc4LjE2MDMzNjYwMjA3MzY3LDI1OS41NzQyMTkgTDE5NC4yNDYyNzQ2MDIwNzM2NywyNzUuNjYwMTU2IEwyNTMuNTE1ODA1NjAyMDczNjcsMjE2LjM5NDUzMSBDMjU5LjM3OTA4NjYwMjA3MzY0LDIxMC41MjczNDQgMjY4Ljg5MDgwNTYwMjA3MzY3LDIxMC41MjczNDQgMjc0Ljc1Nzk5MjYwMjA3MzY3LDIxNi4zOTQ1MzEgQzI4MC42MjUxODA2MDIwNzM2NywyMjIuMjU3ODEyIDI4MC42MjUxODA2MDIwNzM2NywyMzEuNzY5NTMxIDI3NC43NTc5OTI2MDIwNzM2NywyMzcuNjM2NzE5IHpNMjc0Ljc1Nzk5MjYwMjA3MzY3LDIzNy42MzY3MTkgIiBzdHlsZT0iZmlsbC1ydWxlOiBub256ZXJvOyIgaWQ9InN2Z18xIiBmaWxsPSIjMDRiODA0IiBmaWxsLW9wYWNpdHk9IjEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW9wYWNpdHk9IjEiLz4KPHBhdGggZD0iTTQzNC4zMzIyMTE2MDIwNzM2NCwxMzguOTE3OTY5IEw0MzQuMzE2NTg2NjAyMDczNjQsMTM4LjUxOTUzMSBDNDM0LjA5MzkzMDYwMjA3MzY3LDEzMy42MDE1NjIgNDMzLjk0NTQ5MjYwMjA3MzY3LDEyOC4zOTg0MzggNDMzLjg1NTY0OTYwMjA3MzcsMTIyLjYwOTM3NSBDNDMzLjQzNzY4MDYwMjA3MzY3LDk0LjM3ODkwNiA0MTAuOTk2Mjc0NjAyMDczNyw3MS4wMjczNDQgMzgyLjc2MTg5OTYwMjA3MzcsNjkuNDQ5MjE5IEMzMjMuODk0NzExNjAyMDczNjQsNjYuMTY0MDYyIDI3OC4zNTU2NDk2MDIwNzM3LDQ2Ljk2ODc1IDIzOS40NDU0OTI2MDIwNzM2Nyw5LjA0Mjk2OSBMMjM5LjExMzQ2MTYwMjA3MzY3LDguNzI2NTYyIEMyMjYuNDIyMDU1NjAyMDczNjcsLTIuOTEwMTU1OTk5OTk5OTk5NyAyMDcuMjc3NTI0NjAyMDczNjcsLTIuOTEwMTU1OTk5OTk5OTk5NyAxOTQuNTgyMjExNjAyMDczNjcsOC43MjY1NjIgTDE5NC4yNTAxODA2MDIwNzM2Nyw5LjA0Mjk2OSBDMTU1LjM0MDAyNDYwMjA3MzY3LDQ2Ljk2ODc1IDEwOS44MDA5NjE2MDIwNzM2Nyw2Ni4xNjQwNjIgNTAuOTMzNzc0NjAyMDczNjcsNjkuNDUzMTI1IEMyMi43MDMzMDU2MDIwNzM2Nyw3MS4wMjczNDQgMC4yNTc5OTI2MDIwNzM2NjkyNSw5NC4zNzg5MDYgLTAuMTU5OTc1Mzk3OTI2MzMwNDgsMTIyLjYxMzI4MSBDLTAuMjQ1OTEzMzk3OTI2MzMwNSwxMjguMzYzMjgxIC0wLjM5ODI1NzM5NzkyNjMzMDUsMTMzLjU2NjQwNiAtMC42MjA5MTMzOTc5MjYzMzA2LDEzOC41MTk1MzEgTC0wLjY0NDM1MDM5NzkyNjMzMDUsMTM5LjQ0NTMxMiBDLTEuNzg4ODgxMzk3OTI2MzMwNSwxOTkuNDcyNjU2IC0zLjIxMDc1NzM5NzkyNjMzMSwyNzQuMTc5Njg4IDIxLjc4MTQzMDYwMjA3MzY3LDM0MS45ODgyODEgQzM1LjUyMzYxODYwMjA3MzY3LDM3OS4yNzczNDQgNTYuMzM2MTE4NjAyMDczNjcsNDExLjY5MTQwNiA4My42MzY4OTk2MDIwNzM2Nyw0MzguMzM1OTM4IEMxMTQuNzMwNjQ5NjAyMDczNjcsNDY4LjY3OTY4OCAxNTUuNDU3MjExNjAyMDczNjcsNDkyLjc2OTUzMSAyMDQuNjgzNzc0NjAyMDczNjcsNTA5LjkzMzU5NCBDMjA2LjI4NTMzNjYwMjA3MzY3LDUxMC40OTIxODggMjA3Ljk0OTM5OTYwMjA3MzY3LDUxMC45NDUzMTIgMjA5LjY0NDcxMTYwMjA3MzY3LDUxMS4yODUxNTYgQzIxMi4wMzUzMzY2MDIwNzM2Nyw1MTEuNzYxNzE5MDAwMDAwMSAyMTQuNDQxNTg2NjAyMDczNjcsNTEyIDIxNi44NDc4MzY2MDIwNzM2Nyw1MTIgQzIxOS4yNTQwODY2MDIwNzM2Nyw1MTIgMjIxLjY2NDI0MjYwMjA3MzY3LDUxMS43NjE3MTkwMDAwMDAxIDIyNC4wNTA5NjE2MDIwNzM2Nyw1MTEuMjg1MTU2IEMyMjUuNzQ2Mjc0NjAyMDczNjcsNTEwLjk0NTMxMiAyMjcuNDIyMDU1NjAyMDczNjcsNTEwLjQ4ODI4MSAyMjkuMDMxNDMwNjAyMDczNjcsNTA5LjkyNTc4MSBDMjc4LjE5OTM5OTYwMjA3MzcsNDkyLjczMDQ2OSAzMTguODgyOTkyNjAyMDczNjcsNDY4LjYyODkwNiAzNDkuOTQ5Mzk5NjAyMDczNyw0MzguMjg5MDYyIEMzNzcuMjM4NDYxNjAyMDczNjQsNDExLjYzNjcxOSAzOTguMDUwOTYxNjAyMDczNjQsMzc5LjIxNDg0NCA0MTEuODA0ODY4NjAyMDczNjcsMzQxLjkxNzk2OSBDNDM2Ljg5MDgwNTYwMjA3MzY3LDI3My45MDYyNSA0MzUuNDcyODM2NjAyMDczNjQsMTk5LjA1ODU5NCA0MzQuMzMyMjExNjAyMDczNjQsMTM4LjkxNzk2OSB6TTIxNi44NDAwMjQ2MDIwNzM2NywzODMuNjA1NDY5IEMxNDYuNDgwNjQ5NjAyMDczNjcsMzgzLjYwNTQ2OSA4OS4yNDIzNjg2MDIwNzM2NywzMjYuMzY3MTg4IDg5LjI0MjM2ODYwMjA3MzY3LDI1Ni4wMDc4MTIgQzg5LjI0MjM2ODYwMjA3MzY3LDE4NS42NDg0MzggMTQ2LjQ4MDY0OTYwMjA3MzY3LDEyOC40MTAxNTYgMjE2Ljg0MDAyNDYwMjA3MzY3LDEyOC40MTAxNTYgQzI4Ny4xOTU0OTI2MDIwNzM2NywxMjguNDEwMTU2IDM0NC40Mzc2ODA2MDIwNzM2NywxODUuNjQ4NDM4IDM0NC40Mzc2ODA2MDIwNzM2NywyNTYuMDA3ODEyIEMzNDQuNDM3NjgwNjAyMDczNjcsMzI2LjM2NzE4OCAyODcuMTk1NDkyNjAyMDczNjcsMzgzLjYwNTQ2OSAyMTYuODQwMDI0NjAyMDczNjcsMzgzLjYwNTQ2OSB6TTIxNi44NDAwMjQ2MDIwNzM2NywzODMuNjA1NDY5ICIgc3R5bGU9ImZpbGwtcnVsZTogbm9uemVybzsiIGlkPSJzdmdfMiIgZmlsbD0iIzA0YjgwNCIgZmlsbC1vcGFjaXR5PSIxIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1vcGFjaXR5PSIxIi8+CjwvZz48L2c+PC9nPjwvc3ZnPg==',
                    width: '32px',
                    height: '32px'
                };
                const symbolMedium = {
                    type: 'picture-marker',  // autocasts as new PictureMarkerSymbol()
                    url: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNTEyLjAwMTQwMzgwODU5MzgiIHZlcnNpb249IjEuMSIgd2lkdGg9IjUxMiIgc3R5bGU9IiI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KCjxnIGNsYXNzPSJjdXJyZW50TGF5ZXIiIHN0eWxlPSIiPjx0aXRsZT5MYXllciAxPC90aXRsZT48ZyBjbGFzcz0ic2VsZWN0ZWQiPjxyZWN0IGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IiIgZmlsbC1ydWxlPSJub256ZXJvIiBpZD0ic3ZnXzMiIHg9Ijc2LjkxMzUzNjA3MTc3NzM0IiB5PSIxMjIuNzY4NzgzNTY5MzM1OTQiIHdpZHRoPSIyNzcuMTk1OTgzODg2NzE4NzUiIGhlaWdodD0iMjY3LjU0MzM2NTQ3ODUxNTYiIHN0eWxlPSJjb2xvcjogcmdiKDAsIDAsIDApOyIgY2xhc3M9IiIgZmlsbC1vcGFjaXR5PSIxIi8+PGcgaWQ9InN1cmZhY2UxIiBjbGFzcz0iIiBmaWxsPSIjZWJlYjFhIiBmaWxsLW9wYWNpdHk9IjEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW9wYWNpdHk9IjEiPgo8cGF0aCBkPSJNMjE3LjQxODA1OTMwMTAzNjgzLDE1OS4wMzUwNjU2OTg5NjMxNyBDMTYzLjYyNTA5MDMwMTAzNjgzLDE1OS4wMzUwNjU2OTg5NjMxNyAxMTkuODYzMzcxMzAxMDM2ODQsMjAyLjc5Njc4NDY5ODk2MzE3IDExOS44NjMzNzEzMDEwMzY4NCwyNTYuNTg1ODQ2Njk4OTYzMTcgQzExOS44NjMzNzEzMDEwMzY4NCwzMTAuMzc4ODE1Njk4OTYzMTQgMTYzLjYyNTA5MDMwMTAzNjgzLDM1NC4xNDA1MzQ2OTg5NjMxNyAyMTcuNDE4MDU5MzAxMDM2ODMsMzU0LjE0MDUzNDY5ODk2MzE3IEMyNzEuMjA3MTIxMzAxMDM2OCwzNTQuMTQwNTM0Njk4OTYzMTcgMzE0Ljk2ODg0MDMwMTAzNjgzLDMxMC4zNzg4MTU2OTg5NjMxNCAzMTQuOTY4ODQwMzAxMDM2ODMsMjU2LjU4NTg0NjY5ODk2MzE3IEMzMTQuOTY4ODQwMzAxMDM2ODMsMjAyLjc5Njc4NDY5ODk2MzE3IDI3MS4yMDcxMjEzMDEwMzY4LDE1OS4wMzUwNjU2OTg5NjMxNyAyMTcuNDE4MDU5MzAxMDM2ODMsMTU5LjAzNTA2NTY5ODk2MzE3IHpNMjc1LjMzNjAyNzMwMTAzNjg0LDIzOC4yMTQ3NTM2OTg5NjMxNiBMMjA1LjQ0OTMwOTMwMTAzNjgzLDMwOC4xMDE0NzI2OTg5NjMxNiBDMjAyLjUxNTcxNTMwMTAzNjgzLDMxMS4wMzUwNjU2OTg5NjMxNCAxOTguNjY4MDU5MzAxMDM2ODMsMzEyLjUwMzgxNTY5ODk2MzE0IDE5NC44MjQzMDkzMDEwMzY4MywzMTIuNTAzODE1Njk4OTYzMTQgQzE5MC45ODA1NTkzMDEwMzY4MywzMTIuNTAzODE1Njk4OTYzMTQgMTg3LjEzNjgwOTMwMTAzNjgzLDMxMS4wMzg5NzI2OTg5NjMxNiAxODQuMjAzMjE1MzAxMDM2ODMsMzA4LjEwMTQ3MjY5ODk2MzE2IEwxNTcuNDk2MTg0MzAxMDM2ODMsMjgxLjM5NDQ0MDY5ODk2MzE0IEMxNTEuNjI4OTk2MzAxMDM2ODQsMjc1LjUzMTE1OTY5ODk2MzE3IDE1MS42Mjg5OTYzMDEwMzY4NCwyNjYuMDE5NDQwNjk4OTYzMTQgMTU3LjQ5NjE4NDMwMTAzNjgzLDI2MC4xNTIyNTM2OTg5NjMyIEMxNjMuMzU5NDY1MzAxMDM2ODMsMjU0LjI4NTA2NTY5ODk2MzE3IDE3Mi44NzExODQzMDEwMzY4MywyNTQuMjg1MDY1Njk4OTYzMTcgMTc4LjczODM3MTMwMTAzNjg0LDI2MC4xNTIyNTM2OTg5NjMyIEwxOTQuODI0MzA5MzAxMDM2ODMsMjc2LjIzODE5MDY5ODk2MzE0IEwyNTQuMDkzODQwMzAxMDM2ODMsMjE2Ljk3MjU2NTY5ODk2MzE3IEMyNTkuOTU3MTIxMzAxMDM2OCwyMTEuMTA1Mzc4Njk4OTYzMTYgMjY5LjQ2ODg0MDMwMTAzNjgzLDIxMS4xMDUzNzg2OTg5NjMxNiAyNzUuMzM2MDI3MzAxMDM2ODQsMjE2Ljk3MjU2NTY5ODk2MzE3IEMyODEuMjAzMjE1MzAxMDM2ODMsMjIyLjgzNTg0NjY5ODk2MzE3IDI4MS4yMDMyMTUzMDEwMzY4MywyMzIuMzQ3NTY1Njk4OTYzMTcgMjc1LjMzNjAyNzMwMTAzNjg0LDIzOC4yMTQ3NTM2OTg5NjMxNiB6TTI3NS4zMzYwMjczMDEwMzY4NCwyMzguMjE0NzUzNjk4OTYzMTYgIiBzdHlsZT0iZmlsbC1ydWxlOiBub256ZXJvOyIgaWQ9InN2Z18xIiBmaWxsPSIjZWJlYjFhIiBmaWxsLW9wYWNpdHk9IjEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW9wYWNpdHk9IjEiLz4KPHBhdGggZD0iTTQzNC45MTAyNDYzMDEwMzY4LDEzOS40OTYwMDM2OTg5NjMxNiBMNDM0Ljg5NDYyMTMwMTAzNjgsMTM5LjA5NzU2NTY5ODk2MzE3IEM0MzQuNjcxOTY1MzAxMDM2ODMsMTM0LjE3OTU5NjY5ODk2MzE3IDQzNC41MjM1MjczMDEwMzY4NCwxMjguOTc2NDcyNjk4OTYzMTYgNDM0LjQzMzY4NDMwMTAzNjg2LDEyMy4xODc0MDk2OTg5NjMxNyBDNDM0LjAxNTcxNTMwMTAzNjgzLDk0Ljk1Njk0MDY5ODk2MzE3IDQxMS41NzQzMDkzMDEwMzY4Niw3MS42MDUzNzg2OTg5NjMxNiAzODMuMzM5OTM0MzAxMDM2ODYsNzAuMDI3MjUzNjk4OTYzMTYgQzMyNC40NzI3NDYzMDEwMzY4LDY2Ljc0MjA5NjY5ODk2MzE3IDI3OC45MzM2ODQzMDEwMzY4Niw0Ny41NDY3ODQ2OTg5NjMxNjUgMjQwLjAyMzUyNzMwMTAzNjg0LDkuNjIxMDAzNjk4OTYzMTY1IEwyMzkuNjkxNDk2MzAxMDM2ODQsOS4zMDQ1OTY2OTg5NjMxNjUgQzIyNy4wMDAwOTAzMDEwMzY4MywtMi4zMzIxMjEzMDEwMzY4MzQ1IDIwNy44NTU1NTkzMDEwMzY4MywtMi4zMzIxMjEzMDEwMzY4MzQ1IDE5NS4xNjAyNDYzMDEwMzY4NCw5LjMwNDU5NjY5ODk2MzE2NSBMMTk0LjgyODIxNTMwMTAzNjgzLDkuNjIxMDAzNjk4OTYzMTY1IEMxNTUuOTE4MDU5MzAxMDM2ODMsNDcuNTQ2Nzg0Njk4OTYzMTY1IDExMC4zNzg5OTYzMDEwMzY4NCw2Ni43NDIwOTY2OTg5NjMxNyA1MS41MTE4MDkzMDEwMzY4MzQsNzAuMDMxMTU5Njk4OTYzMTcgQzIzLjI4MTM0MDMwMTAzNjgzNSw3MS42MDUzNzg2OTg5NjMxNiAwLjgzNjAyNzMwMTAzNjgzNDYsOTQuOTU2OTQwNjk4OTYzMTcgMC40MTgwNTkzMDEwMzY4MzQ3NSwxMjMuMTkxMzE1Njk4OTYzMTcgQzAuMzMyMTIxMzAxMDM2ODM0NywxMjguOTQxMzE1Njk4OTYzMTcgMC4xNzk3NzczMDEwMzY4MzQ3NiwxMzQuMTQ0NDQwNjk4OTYzMTcgLTAuMDQyODc4Njk4OTYzMTY1MzIsMTM5LjA5NzU2NTY5ODk2MzE3IEwtMC4wNjYzMTU2OTg5NjMxNjUyNSwxNDAuMDIzMzQ2Njk4OTYzMTcgQy0xLjIxMDg0NjY5ODk2MzE2NTIsMjAwLjA1MDY5MDY5ODk2MzE3IC0yLjYzMjcyMjY5ODk2MzE2NTQsMjc0Ljc1NzcyMjY5ODk2MzE2IDIyLjM1OTQ2NTMwMTAzNjgzNSwzNDIuNTY2MzE1Njk4OTYzMTQgQzM2LjEwMTY1MzMwMTAzNjgzLDM3OS44NTUzNzg2OTg5NjMyIDU2LjkxNDE1MzMwMTAzNjgzLDQxMi4yNjk0NDA2OTg5NjMxNCA4NC4yMTQ5MzQzMDEwMzY4Myw0MzguOTEzOTcyNjk4OTYzMTYgQzExNS4zMDg2ODQzMDEwMzY4Myw0NjkuMjU3NzIyNjk4OTYzMTYgMTU2LjAzNTI0NjMwMTAzNjg0LDQ5My4zNDc1NjU2OTg5NjMxNCAyMDUuMjYxODA5MzAxMDM2ODMsNTEwLjUxMTYyODY5ODk2MzIgQzIwNi44NjMzNzEzMDEwMzY4NCw1MTEuMDcwMjIyNjk4OTYzMTYgMjA4LjUyNzQzNDMwMTAzNjgzLDUxMS41MjMzNDY2OTg5NjMxNyAyMTAuMjIyNzQ2MzAxMDM2ODQsNTExLjg2MzE5MDY5ODk2MzE0IEMyMTIuNjEzMzcxMzAxMDM2ODQsNTEyLjMzOTc1MzY5ODk2MzIgMjE1LjAxOTYyMTMwMTAzNjg0LDUxMi41NzgwMzQ2OTg5NjMyIDIxNy40MjU4NzEzMDEwMzY4NCw1MTIuNTc4MDM0Njk4OTYzMiBDMjE5LjgzMjEyMTMwMTAzNjg0LDUxMi41NzgwMzQ2OTg5NjMyIDIyMi4yNDIyNzczMDEwMzY4NCw1MTIuMzM5NzUzNjk4OTYzMiAyMjQuNjI4OTk2MzAxMDM2ODQsNTExLjg2MzE5MDY5ODk2MzE0IEMyMjYuMzI0MzA5MzAxMDM2ODMsNTExLjUyMzM0NjY5ODk2MzE3IDIyOC4wMDAwOTAzMDEwMzY4Myw1MTEuMDY2MzE1Njk4OTYzMTQgMjI5LjYwOTQ2NTMwMTAzNjgzLDUxMC41MDM4MTU2OTg5NjMxNCBDMjc4Ljc3NzQzNDMwMTAzNjg2LDQ5My4zMDg1MDM2OTg5NjMyIDMxOS40NjEwMjczMDEwMzY4NCw0NjkuMjA2OTQwNjk4OTYzMTQgMzUwLjUyNzQzNDMwMTAzNjg2LDQzOC44NjcwOTY2OTg5NjMxNyBDMzc3LjgxNjQ5NjMwMTAzNjgsNDEyLjIxNDc1MzY5ODk2MzIgMzk4LjYyODk5NjMwMTAzNjgsMzc5Ljc5Mjg3ODY5ODk2MzIgNDEyLjM4MjkwMzMwMTAzNjgzLDM0Mi40OTYwMDM2OTg5NjMyIEM0MzcuNDY4ODQwMzAxMDM2ODMsMjc0LjQ4NDI4NDY5ODk2MzE3IDQzNi4wNTA4NzEzMDEwMzY4LDE5OS42MzY2Mjg2OTg5NjMxNiA0MzQuOTEwMjQ2MzAxMDM2OCwxMzkuNDk2MDAzNjk4OTYzMTYgek0yMTcuNDE4MDU5MzAxMDM2ODMsMzg0LjE4MzUwMzY5ODk2MzIgQzE0Ny4wNTg2ODQzMDEwMzY4MywzODQuMTgzNTAzNjk4OTYzMiA4OS44MjA0MDMzMDEwMzY4MywzMjYuOTQ1MjIyNjk4OTYzMTYgODkuODIwNDAzMzAxMDM2ODMsMjU2LjU4NTg0NjY5ODk2MzE3IEM4OS44MjA0MDMzMDEwMzY4MywxODYuMjI2NDcyNjk4OTYzMTYgMTQ3LjA1ODY4NDMwMTAzNjgzLDEyOC45ODgxOTA2OTg5NjMxNyAyMTcuNDE4MDU5MzAxMDM2ODMsMTI4Ljk4ODE5MDY5ODk2MzE3IEMyODcuNzczNTI3MzAxMDM2ODQsMTI4Ljk4ODE5MDY5ODk2MzE3IDM0NS4wMTU3MTUzMDEwMzY4MywxODYuMjI2NDcyNjk4OTYzMTYgMzQ1LjAxNTcxNTMwMTAzNjgzLDI1Ni41ODU4NDY2OTg5NjMxNyBDMzQ1LjAxNTcxNTMwMTAzNjgzLDMyNi45NDUyMjI2OTg5NjMxNiAyODcuNzczNTI3MzAxMDM2ODQsMzg0LjE4MzUwMzY5ODk2MzIgMjE3LjQxODA1OTMwMTAzNjgzLDM4NC4xODM1MDM2OTg5NjMyIHpNMjE3LjQxODA1OTMwMTAzNjgzLDM4NC4xODM1MDM2OTg5NjMyICIgc3R5bGU9ImZpbGwtcnVsZTogbm9uemVybzsiIGlkPSJzdmdfMiIgZmlsbD0iI2ViZWIxYSIgZmlsbC1vcGFjaXR5PSIxIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1vcGFjaXR5PSIxIi8+CjwvZz48ZyBjbGFzcz0iIiBmaWxsPSIjZWJlYjFhIiBmaWxsLW9wYWNpdHk9IjEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW9wYWNpdHk9IjEiIGlkPSJzdmdfNCI+CjxwYXRoIGQ9Ik0yMTcuNDE4MDU5MzAxMDM2ODMsMTU5LjAzNTA2NTY5ODk2MzE3IEMxNjMuNjI1MDkwMzAxMDM2ODMsMTU5LjAzNTA2NTY5ODk2MzE3IDExOS44NjMzNzEzMDEwMzY4NCwyMDIuNzk2Nzg0Njk4OTYzMTcgMTE5Ljg2MzM3MTMwMTAzNjg0LDI1Ni41ODU4NDY2OTg5NjMxNyBDMTE5Ljg2MzM3MTMwMTAzNjg0LDMxMC4zNzg4MTU2OTg5NjMxNCAxNjMuNjI1MDkwMzAxMDM2ODMsMzU0LjE0MDUzNDY5ODk2MzE3IDIxNy40MTgwNTkzMDEwMzY4MywzNTQuMTQwNTM0Njk4OTYzMTcgQzI3MS4yMDcxMjEzMDEwMzY4LDM1NC4xNDA1MzQ2OTg5NjMxNyAzMTQuOTY4ODQwMzAxMDM2ODMsMzEwLjM3ODgxNTY5ODk2MzE0IDMxNC45Njg4NDAzMDEwMzY4MywyNTYuNTg1ODQ2Njk4OTYzMTcgQzMxNC45Njg4NDAzMDEwMzY4MywyMDIuNzk2Nzg0Njk4OTYzMTcgMjcxLjIwNzEyMTMwMTAzNjgsMTU5LjAzNTA2NTY5ODk2MzE3IDIxNy40MTgwNTkzMDEwMzY4MywxNTkuMDM1MDY1Njk4OTYzMTcgek0yNzUuMzM2MDI3MzAxMDM2ODQsMjM4LjIxNDc1MzY5ODk2MzE2IEwyMDUuNDQ5MzA5MzAxMDM2ODMsMzA4LjEwMTQ3MjY5ODk2MzE2IEMyMDIuNTE1NzE1MzAxMDM2ODMsMzExLjAzNTA2NTY5ODk2MzE0IDE5OC42NjgwNTkzMDEwMzY4MywzMTIuNTAzODE1Njk4OTYzMTQgMTk0LjgyNDMwOTMwMTAzNjgzLDMxMi41MDM4MTU2OTg5NjMxNCBDMTkwLjk4MDU1OTMwMTAzNjgzLDMxMi41MDM4MTU2OTg5NjMxNCAxODcuMTM2ODA5MzAxMDM2ODMsMzExLjAzODk3MjY5ODk2MzE2IDE4NC4yMDMyMTUzMDEwMzY4MywzMDguMTAxNDcyNjk4OTYzMTYgTDE1Ny40OTYxODQzMDEwMzY4MywyODEuMzk0NDQwNjk4OTYzMTQgQzE1MS42Mjg5OTYzMDEwMzY4NCwyNzUuNTMxMTU5Njk4OTYzMTcgMTUxLjYyODk5NjMwMTAzNjg0LDI2Ni4wMTk0NDA2OTg5NjMxNCAxNTcuNDk2MTg0MzAxMDM2ODMsMjYwLjE1MjI1MzY5ODk2MzIgQzE2My4zNTk0NjUzMDEwMzY4MywyNTQuMjg1MDY1Njk4OTYzMTcgMTcyLjg3MTE4NDMwMTAzNjgzLDI1NC4yODUwNjU2OTg5NjMxNyAxNzguNzM4MzcxMzAxMDM2ODQsMjYwLjE1MjI1MzY5ODk2MzIgTDE5NC44MjQzMDkzMDEwMzY4MywyNzYuMjM4MTkwNjk4OTYzMTQgTDI1NC4wOTM4NDAzMDEwMzY4MywyMTYuOTcyNTY1Njk4OTYzMTcgQzI1OS45NTcxMjEzMDEwMzY4LDIxMS4xMDUzNzg2OTg5NjMxNiAyNjkuNDY4ODQwMzAxMDM2ODMsMjExLjEwNTM3ODY5ODk2MzE2IDI3NS4zMzYwMjczMDEwMzY4NCwyMTYuOTcyNTY1Njk4OTYzMTcgQzI4MS4yMDMyMTUzMDEwMzY4MywyMjIuODM1ODQ2Njk4OTYzMTcgMjgxLjIwMzIxNTMwMTAzNjgzLDIzMi4zNDc1NjU2OTg5NjMxNyAyNzUuMzM2MDI3MzAxMDM2ODQsMjM4LjIxNDc1MzY5ODk2MzE2IHpNMjc1LjMzNjAyNzMwMTAzNjg0LDIzOC4yMTQ3NTM2OTg5NjMxNiAiIHN0eWxlPSJmaWxsLXJ1bGU6IG5vbnplcm87IiBpZD0ic3ZnXzYiIGZpbGw9IiNlYmViMWEiIGZpbGwtb3BhY2l0eT0iMSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utb3BhY2l0eT0iMSIvPgo8cGF0aCBkPSJNNDM0LjkxMDI0NjMwMTAzNjgsMTM5LjQ5NjAwMzY5ODk2MzE2IEw0MzQuODk0NjIxMzAxMDM2OCwxMzkuMDk3NTY1Njk4OTYzMTcgQzQzNC42NzE5NjUzMDEwMzY4MywxMzQuMTc5NTk2Njk4OTYzMTcgNDM0LjUyMzUyNzMwMTAzNjg0LDEyOC45NzY0NzI2OTg5NjMxNiA0MzQuNDMzNjg0MzAxMDM2ODYsMTIzLjE4NzQwOTY5ODk2MzE3IEM0MzQuMDE1NzE1MzAxMDM2ODMsOTQuOTU2OTQwNjk4OTYzMTcgNDExLjU3NDMwOTMwMTAzNjg2LDcxLjYwNTM3ODY5ODk2MzE2IDM4My4zMzk5MzQzMDEwMzY4Niw3MC4wMjcyNTM2OTg5NjMxNiBDMzI0LjQ3Mjc0NjMwMTAzNjgsNjYuNzQyMDk2Njk4OTYzMTcgMjc4LjkzMzY4NDMwMTAzNjg2LDQ3LjU0Njc4NDY5ODk2MzE2NSAyNDAuMDIzNTI3MzAxMDM2ODQsOS42MjEwMDM2OTg5NjMxNjUgTDIzOS42OTE0OTYzMDEwMzY4NCw5LjMwNDU5NjY5ODk2MzE2NSBDMjI3LjAwMDA5MDMwMTAzNjgzLC0yLjMzMjEyMTMwMTAzNjgzNDUgMjA3Ljg1NTU1OTMwMTAzNjgzLC0yLjMzMjEyMTMwMTAzNjgzNDUgMTk1LjE2MDI0NjMwMTAzNjg0LDkuMzA0NTk2Njk4OTYzMTY1IEwxOTQuODI4MjE1MzAxMDM2ODMsOS42MjEwMDM2OTg5NjMxNjUgQzE1NS45MTgwNTkzMDEwMzY4Myw0Ny41NDY3ODQ2OTg5NjMxNjUgMTEwLjM3ODk5NjMwMTAzNjg0LDY2Ljc0MjA5NjY5ODk2MzE3IDUxLjUxMTgwOTMwMTAzNjgzNCw3MC4wMzExNTk2OTg5NjMxNyBDMjMuMjgxMzQwMzAxMDM2ODM1LDcxLjYwNTM3ODY5ODk2MzE2IDAuODM2MDI3MzAxMDM2ODM0Niw5NC45NTY5NDA2OTg5NjMxNyAwLjQxODA1OTMwMTAzNjgzNDc1LDEyMy4xOTEzMTU2OTg5NjMxNyBDMC4zMzIxMjEzMDEwMzY4MzQ3LDEyOC45NDEzMTU2OTg5NjMxNyAwLjE3OTc3NzMwMTAzNjgzNDc2LDEzNC4xNDQ0NDA2OTg5NjMxNyAtMC4wNDI4Nzg2OTg5NjMxNjUzMiwxMzkuMDk3NTY1Njk4OTYzMTcgTC0wLjA2NjMxNTY5ODk2MzE2NTI1LDE0MC4wMjMzNDY2OTg5NjMxNyBDLTEuMjEwODQ2Njk4OTYzMTY1MiwyMDAuMDUwNjkwNjk4OTYzMTcgLTIuNjMyNzIyNjk4OTYzMTY1NCwyNzQuNzU3NzIyNjk4OTYzMTYgMjIuMzU5NDY1MzAxMDM2ODM1LDM0Mi41NjYzMTU2OTg5NjMxNCBDMzYuMTAxNjUzMzAxMDM2ODMsMzc5Ljg1NTM3ODY5ODk2MzIgNTYuOTE0MTUzMzAxMDM2ODMsNDEyLjI2OTQ0MDY5ODk2MzE0IDg0LjIxNDkzNDMwMTAzNjgzLDQzOC45MTM5NzI2OTg5NjMxNiBDMTE1LjMwODY4NDMwMTAzNjgzLDQ2OS4yNTc3MjI2OTg5NjMxNiAxNTYuMDM1MjQ2MzAxMDM2ODQsNDkzLjM0NzU2NTY5ODk2MzE0IDIwNS4yNjE4MDkzMDEwMzY4Myw1MTAuNTExNjI4Njk4OTYzMiBDMjA2Ljg2MzM3MTMwMTAzNjg0LDUxMS4wNzAyMjI2OTg5NjMxNiAyMDguNTI3NDM0MzAxMDM2ODMsNTExLjUyMzM0NjY5ODk2MzE3IDIxMC4yMjI3NDYzMDEwMzY4NCw1MTEuODYzMTkwNjk4OTYzMTQgQzIxMi42MTMzNzEzMDEwMzY4NCw1MTIuMzM5NzUzNjk4OTYzMiAyMTUuMDE5NjIxMzAxMDM2ODQsNTEyLjU3ODAzNDY5ODk2MzIgMjE3LjQyNTg3MTMwMTAzNjg0LDUxMi41NzgwMzQ2OTg5NjMyIEMyMTkuODMyMTIxMzAxMDM2ODQsNTEyLjU3ODAzNDY5ODk2MzIgMjIyLjI0MjI3NzMwMTAzNjg0LDUxMi4zMzk3NTM2OTg5NjMyIDIyNC42Mjg5OTYzMDEwMzY4NCw1MTEuODYzMTkwNjk4OTYzMTQgQzIyNi4zMjQzMDkzMDEwMzY4Myw1MTEuNTIzMzQ2Njk4OTYzMTcgMjI4LjAwMDA5MDMwMTAzNjgzLDUxMS4wNjYzMTU2OTg5NjMxNCAyMjkuNjA5NDY1MzAxMDM2ODMsNTEwLjUwMzgxNTY5ODk2MzE0IEMyNzguNzc3NDM0MzAxMDM2ODYsNDkzLjMwODUwMzY5ODk2MzIgMzE5LjQ2MTAyNzMwMTAzNjg0LDQ2OS4yMDY5NDA2OTg5NjMxNCAzNTAuNTI3NDM0MzAxMDM2ODYsNDM4Ljg2NzA5NjY5ODk2MzE3IEMzNzcuODE2NDk2MzAxMDM2OCw0MTIuMjE0NzUzNjk4OTYzMiAzOTguNjI4OTk2MzAxMDM2OCwzNzkuNzkyODc4Njk4OTYzMiA0MTIuMzgyOTAzMzAxMDM2ODMsMzQyLjQ5NjAwMzY5ODk2MzIgQzQzNy40Njg4NDAzMDEwMzY4MywyNzQuNDg0Mjg0Njk4OTYzMTcgNDM2LjA1MDg3MTMwMTAzNjgsMTk5LjYzNjYyODY5ODk2MzE2IDQzNC45MTAyNDYzMDEwMzY4LDEzOS40OTYwMDM2OTg5NjMxNiB6TTIxNy40MTgwNTkzMDEwMzY4MywzODQuMTgzNTAzNjk4OTYzMiBDMTQ3LjA1ODY4NDMwMTAzNjgzLDM4NC4xODM1MDM2OTg5NjMyIDg5LjgyMDQwMzMwMTAzNjgzLDMyNi45NDUyMjI2OTg5NjMxNiA4OS44MjA0MDMzMDEwMzY4MywyNTYuNTg1ODQ2Njk4OTYzMTcgQzg5LjgyMDQwMzMwMTAzNjgzLDE4Ni4yMjY0NzI2OTg5NjMxNiAxNDcuMDU4Njg0MzAxMDM2ODMsMTI4Ljk4ODE5MDY5ODk2MzE3IDIxNy40MTgwNTkzMDEwMzY4MywxMjguOTg4MTkwNjk4OTYzMTcgQzI4Ny43NzM1MjczMDEwMzY4NCwxMjguOTg4MTkwNjk4OTYzMTcgMzQ1LjAxNTcxNTMwMTAzNjgzLDE4Ni4yMjY0NzI2OTg5NjMxNiAzNDUuMDE1NzE1MzAxMDM2ODMsMjU2LjU4NTg0NjY5ODk2MzE3IEMzNDUuMDE1NzE1MzAxMDM2ODMsMzI2Ljk0NTIyMjY5ODk2MzE2IDI4Ny43NzM1MjczMDEwMzY4NCwzODQuMTgzNTAzNjk4OTYzMiAyMTcuNDE4MDU5MzAxMDM2ODMsMzg0LjE4MzUwMzY5ODk2MzIgek0yMTcuNDE4MDU5MzAxMDM2ODMsMzg0LjE4MzUwMzY5ODk2MzIgIiBzdHlsZT0iZmlsbC1ydWxlOiBub256ZXJvOyIgaWQ9InN2Z184IiBmaWxsPSIjZWJlYjFhIiBmaWxsLW9wYWNpdHk9IjEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW9wYWNpdHk9IjEiLz4KPC9nPjxnIGNsYXNzPSIiIGZpbGw9IiNlYmViMWEiIGZpbGwtb3BhY2l0eT0iMSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utb3BhY2l0eT0iMSIgaWQ9InN2Z18xMCI+CjxwYXRoIGQ9Ik0yMTcuNDE4MDU5MzAxMDM2ODMsMTU5LjAzNTA2NTY5ODk2MzE3IEMxNjMuNjI1MDkwMzAxMDM2ODMsMTU5LjAzNTA2NTY5ODk2MzE3IDExOS44NjMzNzEzMDEwMzY4NCwyMDIuNzk2Nzg0Njk4OTYzMTcgMTE5Ljg2MzM3MTMwMTAzNjg0LDI1Ni41ODU4NDY2OTg5NjMxNyBDMTE5Ljg2MzM3MTMwMTAzNjg0LDMxMC4zNzg4MTU2OTg5NjMxNCAxNjMuNjI1MDkwMzAxMDM2ODMsMzU0LjE0MDUzNDY5ODk2MzE3IDIxNy40MTgwNTkzMDEwMzY4MywzNTQuMTQwNTM0Njk4OTYzMTcgQzI3MS4yMDcxMjEzMDEwMzY4LDM1NC4xNDA1MzQ2OTg5NjMxNyAzMTQuOTY4ODQwMzAxMDM2ODMsMzEwLjM3ODgxNTY5ODk2MzE0IDMxNC45Njg4NDAzMDEwMzY4MywyNTYuNTg1ODQ2Njk4OTYzMTcgQzMxNC45Njg4NDAzMDEwMzY4MywyMDIuNzk2Nzg0Njk4OTYzMTcgMjcxLjIwNzEyMTMwMTAzNjgsMTU5LjAzNTA2NTY5ODk2MzE3IDIxNy40MTgwNTkzMDEwMzY4MywxNTkuMDM1MDY1Njk4OTYzMTcgek0yNzUuMzM2MDI3MzAxMDM2ODQsMjM4LjIxNDc1MzY5ODk2MzE2IEwyMDUuNDQ5MzA5MzAxMDM2ODMsMzA4LjEwMTQ3MjY5ODk2MzE2IEMyMDIuNTE1NzE1MzAxMDM2ODMsMzExLjAzNTA2NTY5ODk2MzE0IDE5OC42NjgwNTkzMDEwMzY4MywzMTIuNTAzODE1Njk4OTYzMTQgMTk0LjgyNDMwOTMwMTAzNjgzLDMxMi41MDM4MTU2OTg5NjMxNCBDMTkwLjk4MDU1OTMwMTAzNjgzLDMxMi41MDM4MTU2OTg5NjMxNCAxODcuMTM2ODA5MzAxMDM2ODMsMzExLjAzODk3MjY5ODk2MzE2IDE4NC4yMDMyMTUzMDEwMzY4MywzMDguMTAxNDcyNjk4OTYzMTYgTDE1Ny40OTYxODQzMDEwMzY4MywyODEuMzk0NDQwNjk4OTYzMTQgQzE1MS42Mjg5OTYzMDEwMzY4NCwyNzUuNTMxMTU5Njk4OTYzMTcgMTUxLjYyODk5NjMwMTAzNjg0LDI2Ni4wMTk0NDA2OTg5NjMxNCAxNTcuNDk2MTg0MzAxMDM2ODMsMjYwLjE1MjI1MzY5ODk2MzIgQzE2My4zNTk0NjUzMDEwMzY4MywyNTQuMjg1MDY1Njk4OTYzMTcgMTcyLjg3MTE4NDMwMTAzNjgzLDI1NC4yODUwNjU2OTg5NjMxNyAxNzguNzM4MzcxMzAxMDM2ODQsMjYwLjE1MjI1MzY5ODk2MzIgTDE5NC44MjQzMDkzMDEwMzY4MywyNzYuMjM4MTkwNjk4OTYzMTQgTDI1NC4wOTM4NDAzMDEwMzY4MywyMTYuOTcyNTY1Njk4OTYzMTcgQzI1OS45NTcxMjEzMDEwMzY4LDIxMS4xMDUzNzg2OTg5NjMxNiAyNjkuNDY4ODQwMzAxMDM2ODMsMjExLjEwNTM3ODY5ODk2MzE2IDI3NS4zMzYwMjczMDEwMzY4NCwyMTYuOTcyNTY1Njk4OTYzMTcgQzI4MS4yMDMyMTUzMDEwMzY4MywyMjIuODM1ODQ2Njk4OTYzMTcgMjgxLjIwMzIxNTMwMTAzNjgzLDIzMi4zNDc1NjU2OTg5NjMxNyAyNzUuMzM2MDI3MzAxMDM2ODQsMjM4LjIxNDc1MzY5ODk2MzE2IHpNMjc1LjMzNjAyNzMwMTAzNjg0LDIzOC4yMTQ3NTM2OTg5NjMxNiAiIHN0eWxlPSJmaWxsLXJ1bGU6IG5vbnplcm87IiBpZD0ic3ZnXzEyIiBmaWxsPSIjZWJlYjFhIiBmaWxsLW9wYWNpdHk9IjEiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW9wYWNpdHk9IjEiLz4KPHBhdGggZD0iTTQzNC45MTAyNDYzMDEwMzY4LDEzOS40OTYwMDM2OTg5NjMxNiBMNDM0Ljg5NDYyMTMwMTAzNjgsMTM5LjA5NzU2NTY5ODk2MzE3IEM0MzQuNjcxOTY1MzAxMDM2ODMsMTM0LjE3OTU5NjY5ODk2MzE3IDQzNC41MjM1MjczMDEwMzY4NCwxMjguOTc2NDcyNjk4OTYzMTYgNDM0LjQzMzY4NDMwMTAzNjg2LDEyMy4xODc0MDk2OTg5NjMxNyBDNDM0LjAxNTcxNTMwMTAzNjgzLDk0Ljk1Njk0MDY5ODk2MzE3IDQxMS41NzQzMDkzMDEwMzY4Niw3MS42MDUzNzg2OTg5NjMxNiAzODMuMzM5OTM0MzAxMDM2ODYsNzAuMDI3MjUzNjk4OTYzMTYgQzMyNC40NzI3NDYzMDEwMzY4LDY2Ljc0MjA5NjY5ODk2MzE3IDI3OC45MzM2ODQzMDEwMzY4Niw0Ny41NDY3ODQ2OTg5NjMxNjUgMjQwLjAyMzUyNzMwMTAzNjg0LDkuNjIxMDAzNjk4OTYzMTY1IEwyMzkuNjkxNDk2MzAxMDM2ODQsOS4zMDQ1OTY2OTg5NjMxNjUgQzIyNy4wMDAwOTAzMDEwMzY4MywtMi4zMzIxMjEzMDEwMzY4MzQ1IDIwNy44NTU1NTkzMDEwMzY4MywtMi4zMzIxMjEzMDEwMzY4MzQ1IDE5NS4xNjAyNDYzMDEwMzY4NCw5LjMwNDU5NjY5ODk2MzE2NSBMMTk0LjgyODIxNTMwMTAzNjgzLDkuNjIxMDAzNjk4OTYzMTY1IEMxNTUuOTE4MDU5MzAxMDM2ODMsNDcuNTQ2Nzg0Njk4OTYzMTY1IDExMC4zNzg5OTYzMDEwMzY4NCw2Ni43NDIwOTY2OTg5NjMxNyA1MS41MTE4MDkzMDEwMzY4MzQsNzAuMDMxMTU5Njk4OTYzMTcgQzIzLjI4MTM0MDMwMTAzNjgzNSw3MS42MDUzNzg2OTg5NjMxNiAwLjgzNjAyNzMwMTAzNjgzNDYsOTQuOTU2OTQwNjk4OTYzMTcgMC40MTgwNTkzMDEwMzY4MzQ3NSwxMjMuMTkxMzE1Njk4OTYzMTcgQzAuMzMyMTIxMzAxMDM2ODM0NywxMjguOTQxMzE1Njk4OTYzMTcgMC4xNzk3NzczMDEwMzY4MzQ3NiwxMzQuMTQ0NDQwNjk4OTYzMTcgLTAuMDQyODc4Njk4OTYzMTY1MzIsMTM5LjA5NzU2NTY5ODk2MzE3IEwtMC4wNjYzMTU2OTg5NjMxNjUyNSwxNDAuMDIzMzQ2Njk4OTYzMTcgQy0xLjIxMDg0NjY5ODk2MzE2NTIsMjAwLjA1MDY5MDY5ODk2MzE3IC0yLjYzMjcyMjY5ODk2MzE2NTQsMjc0Ljc1NzcyMjY5ODk2MzE2IDIyLjM1OTQ2NTMwMTAzNjgzNSwzNDIuNTY2MzE1Njk4OTYzMTQgQzM2LjEwMTY1MzMwMTAzNjgzLDM3OS44NTUzNzg2OTg5NjMyIDU2LjkxNDE1MzMwMTAzNjgzLDQxMi4yNjk0NDA2OTg5NjMxNCA4NC4yMTQ5MzQzMDEwMzY4Myw0MzguOTEzOTcyNjk4OTYzMTYgQzExNS4zMDg2ODQzMDEwMzY4Myw0NjkuMjU3NzIyNjk4OTYzMTYgMTU2LjAzNTI0NjMwMTAzNjg0LDQ5My4zNDc1NjU2OTg5NjMxNCAyMDUuMjYxODA5MzAxMDM2ODMsNTEwLjUxMTYyODY5ODk2MzIgQzIwNi44NjMzNzEzMDEwMzY4NCw1MTEuMDcwMjIyNjk4OTYzMTYgMjA4LjUyNzQzNDMwMTAzNjgzLDUxMS41MjMzNDY2OTg5NjMxNyAyMTAuMjIyNzQ2MzAxMDM2ODQsNTExLjg2MzE5MDY5ODk2MzE0IEMyMTIuNjEzMzcxMzAxMDM2ODQsNTEyLjMzOTc1MzY5ODk2MzIgMjE1LjAxOTYyMTMwMTAzNjg0LDUxMi41NzgwMzQ2OTg5NjMyIDIxNy40MjU4NzEzMDEwMzY4NCw1MTIuNTc4MDM0Njk4OTYzMiBDMjE5LjgzMjEyMTMwMTAzNjg0LDUxMi41NzgwMzQ2OTg5NjMyIDIyMi4yNDIyNzczMDEwMzY4NCw1MTIuMzM5NzUzNjk4OTYzMiAyMjQuNjI4OTk2MzAxMDM2ODQsNTExLjg2MzE5MDY5ODk2MzE0IEMyMjYuMzI0MzA5MzAxMDM2ODMsNTExLjUyMzM0NjY5ODk2MzE3IDIyOC4wMDAwOTAzMDEwMzY4Myw1MTEuMDY2MzE1Njk4OTYzMTQgMjI5LjYwOTQ2NTMwMTAzNjgzLDUxMC41MDM4MTU2OTg5NjMxNCBDMjc4Ljc3NzQzNDMwMTAzNjg2LDQ5My4zMDg1MDM2OTg5NjMyIDMxOS40NjEwMjczMDEwMzY4NCw0NjkuMjA2OTQwNjk4OTYzMTQgMzUwLjUyNzQzNDMwMTAzNjg2LDQzOC44NjcwOTY2OTg5NjMxNyBDMzc3LjgxNjQ5NjMwMTAzNjgsNDEyLjIxNDc1MzY5ODk2MzIgMzk4LjYyODk5NjMwMTAzNjgsMzc5Ljc5Mjg3ODY5ODk2MzIgNDEyLjM4MjkwMzMwMTAzNjgzLDM0Mi40OTYwMDM2OTg5NjMyIEM0MzcuNDY4ODQwMzAxMDM2ODMsMjc0LjQ4NDI4NDY5ODk2MzE3IDQzNi4wNTA4NzEzMDEwMzY4LDE5OS42MzY2Mjg2OTg5NjMxNiA0MzQuOTEwMjQ2MzAxMDM2OCwxMzkuNDk2MDAzNjk4OTYzMTYgek0yMTcuNDE4MDU5MzAxMDM2ODMsMzg0LjE4MzUwMzY5ODk2MzIgQzE0Ny4wNTg2ODQzMDEwMzY4MywzODQuMTgzNTAzNjk4OTYzMiA4OS44MjA0MDMzMDEwMzY4MywzMjYuOTQ1MjIyNjk4OTYzMTYgODkuODIwNDAzMzAxMDM2ODMsMjU2LjU4NTg0NjY5ODk2MzE3IEM4OS44MjA0MDMzMDEwMzY4MywxODYuMjI2NDcyNjk4OTYzMTYgMTQ3LjA1ODY4NDMwMTAzNjgzLDEyOC45ODgxOTA2OTg5NjMxNyAyMTcuNDE4MDU5MzAxMDM2ODMsMTI4Ljk4ODE5MDY5ODk2MzE3IEMyODcuNzczNTI3MzAxMDM2ODQsMTI4Ljk4ODE5MDY5ODk2MzE3IDM0NS4wMTU3MTUzMDEwMzY4MywxODYuMjI2NDcyNjk4OTYzMTYgMzQ1LjAxNTcxNTMwMTAzNjgzLDI1Ni41ODU4NDY2OTg5NjMxNyBDMzQ1LjAxNTcxNTMwMTAzNjgzLDMyNi45NDUyMjI2OTg5NjMxNiAyODcuNzczNTI3MzAxMDM2ODQsMzg0LjE4MzUwMzY5ODk2MzIgMjE3LjQxODA1OTMwMTAzNjgzLDM4NC4xODM1MDM2OTg5NjMyIHpNMjE3LjQxODA1OTMwMTAzNjgzLDM4NC4xODM1MDM2OTg5NjMyICIgc3R5bGU9ImZpbGwtcnVsZTogbm9uemVybzsiIGlkPSJzdmdfMTQiIGZpbGw9IiNlYmViMWEiIGZpbGwtb3BhY2l0eT0iMSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utb3BhY2l0eT0iMSIvPgo8L2c+PC9nPjwvZz48L3N2Zz4=',
                    width: '32px',
                    height: '32px'
                };

                // Create a graphic and add the geometry and symbol to it
                const pointGraphic = new Graphic({
                    geometry: point,
                    symbol: symbolHigh
                });

                // Add the graphics to the view's graphics layer
                view.graphics.addMany([pointGraphic]);

                const t = this;
                let playasLayer, municipiosLayer;
                // Create widgets
                const scaleBar = createScaleBar(ScaleBar, view);
                const basemapToggle = createBaseMapToggle(BasemapToggle, view, 'streets-vector');
                const legend = createLegend(Legend, view, 'legendDiv');
                const expandList = createExpand(Expand, view, document.getElementById('listPlayas')
                    , 'esri-icon-layer-list', 'Listado de playas');

                view.when(function () {
                    view.popup.autoOpenEnabled = false; // disable popups
                    // Get layer objects from the web map
                    playasLayer = webmap.findLayerById(playasLayerId);
                    municipiosLayer = webmap.findLayerById(municipiosLayerId);
                    const user = IdentityManager.credentials[0].userId;

                    // Filter by changing runtime params
                    filterPlayas = 'municipio = \'' + aytos[user].municipio_minus + '\'';
                    filterMunicipios = 'municipio = \'' + aytos[user].municipio_mayus + '\'';
                    playasLayer.definitionExpression = filterPlayas;
                    municipiosLayer.definitionExpression = filterMunicipios;

                    municipiosLayer.queryFeatures({
                        outFields: ['*'],
                        where: filterMunicipios,
                        geometry: view.initialExtent,
                        returnGeometry: true
                    }).then(function (results) {
                        const latitude = results.features[0].geometry.centroid.latitude;
                        const longitude = results.features[0].geometry.centroid.longitude;
                        view.center = [longitude, latitude];
                        // Default Home value is current extent
                        const home = createHomeButton(Home, view);
                        // Add widgets to the view
                        view.ui.add([home, expandList], 'top-left');
                        view.ui.add(scaleBar, 'bottom-left');
                        view.ui.add(['info', legend], 'top-right');
                        view.ui.add(['infobutton'], 'bottom-right');

                        // Some elements are hidden by default. We show them when the view is loaded
                        $('#info')[0].classList.remove('esri-hidden');
                        $('#listPlayas')[0].classList.remove('esri-hidden');
                    });

                    const listID = 'ulPlaya';
                    listNode = $('#ulPlaya')[0];
                    listNode.addEventListener('click', onListClickHandler);

                    loadList(view, playasLayer, ['nombre_municipio', 'objectid_12'], filterPlayas).then(function (nBeachs) {
                        // TODO
                    });

                    function onListClickHandler(event) {
                        const target = event.target;
                        const resultId = target.getAttribute('data-result-id');
                        const objectId = target.getAttribute('oid');

                        expandList.collapse();

                        const result = resultId && features && features[parseInt(resultId, 10)];

                        try {
                            view.goTo(result.geometry.extent.expand(2));

                        } catch (error) {
                        }
                    }
                });
            })
            .catch(err => {
                // handle any errors
                console.error(err);
            });
    }
}
